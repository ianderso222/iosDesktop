function addClick(e,t,n){clickX.push(e),clickY.push(t),clickDrag.push(n)}function redraw(){context.clearRect(0,0,context.canvas.width,context.canvas.height);for(var e=0;e<clickX.length;e+=1)clickDrag[e]||0!=e?!clickDrag[e]&&e>0?(context.closePath(),context.beginPath(),context.moveTo(clickX[e],clickY[e]),context.stroke()):(context.lineTo(clickX[e],clickY[e]),context.stroke()):(context.beginPath(),context.moveTo(clickX[e],clickY[e]),context.stroke())}function drawNew(){var e=clickX.length-1;clickDrag[e]?(context.lineTo(clickX[e],clickY[e]),context.stroke()):0==clickX.length?(context.beginPath(),context.moveTo(clickX[e],clickY[e]),context.stroke()):(context.closePath(),context.beginPath(),context.moveTo(clickX[e],clickY[e]),context.stroke())}function mouseDownEventHandler(e){paint=!0;var t=e.offsetX,n=e.offsetY;paint&&(addClick(t,n,!1),drawNew())}function touchstartEventHandler(e){paint=!0,paint&&(addClick(e.touches[0].offsetX,e.touches[0].offsetY,!1),drawNew(),console.log("touch"))}function mouseUpEventHandler(){context.closePath(),paint=!1}function mouseMoveEventHandler(e){var t=e.offsetX,n=e.offsetY;paint&&(addClick(t,n,!0),drawNew())}function touchMoveEventHandler(e){paint&&(addClick(e.touches[0].offsetX,e.touches[0].offsetY,!0),drawNew(),console.log("dragging"))}function setUpHandler(e,t){removeRaceHandlers(),e?(canvas.addEventListener("mouseup",mouseUpEventHandler),canvas.addEventListener("mousemove",mouseMoveEventHandler),canvas.addEventListener("mousedown",mouseDownEventHandler),mouseDownEventHandler(t)):(canvas.addEventListener("touchstart",touchstartEventHandler),canvas.addEventListener("touchmove",touchMoveEventHandler),canvas.addEventListener("touchend",mouseUpEventHandler),touchstartEventHandler(t))}function mouseWins(e){setUpHandler(!0,e)}function touchWins(e){setUpHandler(!1,e)}function removeRaceHandlers(){canvas.removeEventListener("mousedown",mouseWins),canvas.removeEventListener("touchstart",touchWins)}var context=document.getElementById("canvasDiv").getContext("2d"),canvas=document.getElementById("canvasDiv");context=canvas.getContext("2d");var color=document.getElementById("hex").value,brush=document.getElementById("brushSlider").value;context.strokeStyle=color,context.lineJoin="round",context.lineWidth=brush;var clickX=[],clickY=[],clickDrag=[],paint;canvas.addEventListener("mousedown",mouseWins),canvas.addEventListener("touchstart",touchWins);